(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-visitorApply"],{"02b9":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(o("1819"));function u(e){return e&&e.__esModule?e:{default:e}}var n=!0,i={data:function(){return{inputDebounceSet:{openInputDebounce:!0,delay:500},buttonStyle:{activeButton:"background-color: #c0ebd7;border-radius: 30px;box-shadow: 2px 2px 1px 1px #c0ebd7;",changeButton:"background-color: #c0ebd7;border-radius: 30px;box-shadow: 2px 2px 1px 1px #c0ebd7;",selectButton:"background-color: #c0ebd7;border-radius: 30px;box-shadow: 2px 2px 1px 1px #c0ebd7;",confirmButton:"background-color: #c0ebd7;border-radius: 30px;box-shadow: 2px 2px 1px 1px #c0ebd7;",getcodeButton:"background-color: #c0ebd7;border-radius: 30px;box-shadow: 2px 2px 1px 1px #c0ebd7;"},inputsArray:[{segmentationTitle:"预约申请",border_top:"1px solid #f2f2f2",type:"switch",title:"是否驾车",color:"#c0ebd7",defaultValue:!1,scale:".8",variableName:"switch"},{type:"picker-custom",title:"选择业主住址",defaultValue:[0,0,0],onceShowDefaultValue:!0,itemArray:[{building_num:"1幢",temp:[{louhao:"1楼",house_num:["101室","102室","103室","104室","105室","106室"]},{louhao:"2楼",house_num:["201室","202室","203室","204室","205室","206室"]},{louhao:"3楼",house_num:["301室","302室","303室","304室","305室","306室"]},{louhao:"4楼",house_num:["401室","402室","403室","404室","405室","406室"]},{louhao:"5楼",house_num:["501室","502室","503室","504室","505室","506室"]}]},{building_num:"2幢",temp:[{louhao:"1楼",house_num:["101室","102室","103室","104室","105室","106室"]},{louhao:"2楼",house_num:["201室","202室","203室","204室","205室","206室"]},{louhao:"3楼",house_num:["301室","302室","303室","304室","305室","306室"]},{louhao:"4楼",house_num:["401室","402室","403室","404室","405室","406室"]},{louhao:"5楼",house_num:["501室","502室","503室","504室","505室","506室"]}]},{building_num:"3幢",temp:[{louhao:"1楼",house_num:["101室","102室","103室","104室","105室","106室"]},{louhao:"2楼",house_num:["201室","202室","203室","204室","205室","206室"]},{louhao:"3楼",house_num:["301室","302室","303室","304室","305室","306室"]},{louhao:"4楼",house_num:["401室","402室","403室","404室","405室","406室"]},{louhao:"5楼",house_num:["501室","502室","503室","504室","505室","506室"]}]},{building_num:"4幢",temp:[{louhao:"1楼",house_num:["101室","102室","103室","104室","105室","106室"]},{louhao:"2楼",house_num:["201室","202室","203室","204室","205室","206室"]},{louhao:"3楼",house_num:["301室","302室","303室","304室","305室","306室"]},{louhao:"4楼",house_num:["401室","402室","403室","404室","405室","406室"]},{louhao:"5楼",house_num:["501室","502室","503室","504室","505室","506室"]}]},{building_num:"5幢",temp:[{louhao:"1楼",house_num:["101室","102室","103室","104室","105室","106室"]},{louhao:"2楼",house_num:["201室","202室","203室","204室","205室","206室"]},{louhao:"3楼",house_num:["301室","302室","303室","304室","305室","306室"]},{louhao:"4楼",house_num:["401室","402室","403室","404室","405室","406室"]},{louhao:"5楼",house_num:["501室","502室","503室","504室","505室","506室"]}]}],steps:{steps_1_value:"building_num",steps_2_item:"temp",steps_2_value:"louhao",steps_3_item:"house_num"},linkageNum:3,linkage:!0,variableName:"aaaaaaaaaaa"},{type:"picker-date",title:"预约开始时间",onceShowDefaultValue:"true",variableName:"startTime"},{type:"picker-date",title:"预约到期时间",variableName:"expirationTime"}],ruleSet:{color:"#c0ebd7",checkbox_color:"#c0ebd7",itemArray:[{name:"某规则",value:"aa"}]},onLoadData:"data_"}},onLoad:function(e){uni.request({url:uni.getStorageSync("tempUrl")+"wechat/getOpenId",data:{code:window.location.search.substr(6,32)},method:"GET",success:function(e){console.log(e.data),uni.setStorageSync("openId",e.data),uni.request({url:uni.getStorageSync("tempUrl")+"visitor/login",data:{wechatOpenid:uni.getStorageSync("openId")},method:"GET",success:function(e){null!==e.data.path?(alert("您还未注册，请先注册"),uni.reLaunch({url:"./register"})):(console.log(e.data),uni.setStorageSync("visitor",e.data.data))}})}})},methods:{openWin:function(e){console.log(e)},activeFc:function(e){uni.showToast({title:"获取输入成功"}),console.log(e);var t=e;uni.request({url:uni.getStorageSync("tempUrl")+"owner/selectByHouseNum?token="+uni.getStorageSync("visitor").accessToken,data:{buildingNum:t.aaaaaaaaaaa.value[0]+1,houseNum:t.aaaaaaaaaaa.value[1]+1+"0"+(t.aaaaaaaaaaa.value[2]+1)},method:"GET",success:function(e){console.log(e);var o=e.data;0===o.code?uni.request({url:uni.getStorageSync("tempUrl")+"visitorApply/insertSelective?token="+uni.getStorageSync("visitor").accessToken,data:{ownerId:o.data.id,visitorId:uni.getStorageSync("visitor").id,startTime:t.startTime,expirationTime:t.expirationTime,carNum:t.carNum},method:"POST",success:function(e){console.log(e),0===e.data.code?alert("成功啦"):alert("失败")}}):2===o.code?alert(o.exception):alert("异常错误")}})},fatherMethod:function(){n?(this.inputsArray=this.inputsArray.concat({title:"车牌号码",type:"input",variableName:"carNum"}),n=!1):(this.inputsArray=this.inputsArray.slice(0,this.inputsArray.length-1),n=!0)}},components:{inputs:a.default}};t.default=i},"0387":function(e,t,o){"use strict";o.r(t);var a=o("6492"),u=o("93c3");for(var n in u)"default"!==n&&function(e){o.d(t,e,function(){return u[e]})}(n);var i=o("2877"),r=Object(i["a"])(u["default"],a["a"],a["b"],!1,null,"c844874c",null);t["default"]=r.exports},6492:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",[o("inputs",{attrs:{fatherMethod:e.fatherMethod,inputsArray:e.inputsArray,activeName:"提交申请",ruleSet:e.ruleSet,ifRule:"",onLoadData:e.onLoadData,animationType:"rotate3d-fade",animationDuration:.1,submitReSet:"",buttonStyle:e.buttonStyle,inputDebounceSet:e.inputDebounceSet},on:{chaildOpenEvent:function(t){t=e.$handleEvent(t),e.openWin(t)},activeFc:function(t){t=e.$handleEvent(t),e.activeFc(t)}}})],1)},u=[];o.d(t,"a",function(){return a}),o.d(t,"b",function(){return u})},"93c3":function(e,t,o){"use strict";o.r(t);var a=o("02b9"),u=o.n(a);for(var n in a)"default"!==n&&function(e){o.d(t,e,function(){return a[e]})}(n);t["default"]=u.a}}]);